<view class="container">
  <!-- æ’­æ”¾å™¨ -->
  <video id="player" src="{{playUrl}}" controls autoplay bindtimeupdate="onTimeUpdate" class="player"></video>

  <!-- æ ‡é¢˜ä¸åŸºç¡€ä¿¡æ¯ -->
  <view class="card v-info">
    <view class="v-title">{{video.video.title}}</view>
    <view class="v-meta">
      <text class="m">{{video.video.category || 'è§†é¢‘'}}</text>
      <text class="dot">Â·</text>
      <text class="m">{{formatNum(video.stats.play)}} æ¬¡è§‚çœ‹</text>
      <text class="dot">Â·</text>
      <text class="m">å¼¹å¹• {{formatNum(video.stats.danmu)}}</text>
    </view>
  </view>

  <!-- UP ä¸»ä¿¡æ¯åŒº -->
  <view class="card up" wx:if="{{uploader}}" bindtap="goAuthor" data-uid="{{uploader.uid}}">
    <view class="left">
      <image wx:if="{{uploader.avatar}}" class="up-avatar" src="{{uploader.avatar}}" mode="aspectFill" />
      <view wx:else class="up-avatar placeholder">ğŸ™‚</view>
      <view class="up-info">
        <view class="up-name text-ellipsis">{{uploader.name || 'UPä¸»'}}</view>
        <view class="up-desc text-ellipsis" wx:if="{{uploader.desc}}">{{uploader.desc}}</view>
      </view>
    </view>
    <view class="right">
      <view class="btn follow">+ å…³æ³¨</view>
    </view>
  </view>

  <!-- äº’åŠ¨æ“ä½œåŒº -->
  <view class="card actions">
    <view class="act">
      <text class="icon">ğŸ‘</text>
      <text class="txt">ç‚¹èµ</text>
    </view>
    <view class="act">
      <text class="icon">ğŸª™</text>
      <text class="txt">æŠ•å¸</text>
    </view>
    <view class="act">
      <text class="icon">â­</text>
      <text class="txt">æ”¶è—</text>
    </view>
    <view class="act">
      <text class="icon">ğŸ“¤</text>
      <text class="txt">åˆ†äº«</text>
    </view>
  </view>

  <!-- å¼¹å¹•å±‚ï¼ˆç¤ºæ„ï¼‰ -->
  <view class="danmu-box">
    <block wx:for="{{danmus}}" wx:key="id">
      <text class="dm" style="color: {{item.color}}; top: {{item.top}}rpx;">{{item.content}}</text>
    </block>
  </view>

  <!-- ç›¸å…³æ¨è -->
  <view class="card related">
    <view class="section-title">ç›¸å…³æ¨è</view>
    <view class="r-list">
      <block wx:for="{{related}}" wx:key="vid">
        <view class="r-item" bindtap="goDetail" data-vid="{{item.video.vid}}">
          <image class="r-cover" src="{{item.video.cover_url || item.video.coverUrl}}" mode="aspectFill" />
          <view class="r-title text-ellipsis">{{item.video.title}}</view>
          <view class="r-meta">{{formatNum(item.stats.play)}} Â· {{formatNum(item.stats.danmu)}}å¼¹å¹•</view>
        </view>
      </block>
    </view>
  </view>
</view>

