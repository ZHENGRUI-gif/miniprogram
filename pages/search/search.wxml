<view class="container {{showKeyboard ? 'keyboard-active' : ''}}">
  <!-- æœç´¢æ¡† -->
  <view class="search-header">
    <view class="search-box">
      <view class="search-input">
        <text class="search-icon">ğŸ”</text>
        <input 
          class="search-input-field" 
          placeholder="æœç´¢è§†é¢‘/ç”¨æˆ·" 
          value="{{keyword}}"
          bindinput="onInput"
          bindfocus="onInputFocus"
          bindblur="onInputBlur"
          confirm-type="search"
          bindconfirm="onSearch"
          focus="{{inputFocus}}"
        />
      </view>
      <view class="search-btn" bindtap="onSearchBtnTap">æœç´¢</view>
    </view>
  </view>

  <!-- å®æ—¶æœç´¢æ¨è -->
  <view class="matching-section" wx:if="{{matchingWords.length && keyword}}">
    <view class="section-title">æœç´¢æ¨è</view>
    <view class="matching-list">
      <block wx:for="{{matchingWords}}" wx:key="content">
        <view class="matching-item" bindtap="useMatchingWord" data-content="{{item.content}}">
          <text class="matching-text">{{item.content}}</text>
          <view wx:if="{{item.type === 2}}" class="matching-tag hot">çƒ­</view>
          <view wx:elif="{{item.type === 1}}" class="matching-tag new">æ–°</view>
        </view>
      </block>
    </view>
  </view>

  <!-- æœç´¢å»ºè®® -->
  <view class="suggest-section" wx:if="{{suggest.length && !keyword}}">
    <view class="section-title">çŒœä½ æƒ³æœ</view>
    <view class="suggest-list">
      <block wx:for="{{suggest}}" wx:key="*this">
        <view class="suggest-item" bindtap="useSuggest" data-text="{{item}}">{{item}}</view>
      </block>
    </view>
  </view>

  <!-- çƒ­æœæ¦œå• -->
  <view class="hot-search-section" wx:if="{{!searchKeyword && !showKeyboard && hotSearches.length}}">
    <view class="section-header">
      <text class="section-title">bilibiliçƒ­æœ</text>
      <text class="more-link">å®Œæ•´æ¦œå• ></text>
    </view>
    <view class="hot-list">
      <block wx:for="{{hotSearches}}" wx:key="index">
        <view class="hot-item {{index < 5 ? 'left-column' : 'right-column'}}" bindtap="useHotSearch" data-keyword="{{item.keyword}}">
          <view class="hot-rank">{{index + 1}}</view>
          <view class="hot-text">{{item.keyword}}</view>
          <view class="hot-tag" wx:if="{{item.tag}}">{{item.tag}}</view>
        </view>
      </block>
    </view>
  </view>

  <!-- æœç´¢å†å² -->
  <view class="search-history-section" wx:if="{{!searchKeyword && !showKeyboard && searchHistory.length}}">
    <view class="section-header">
      <text class="section-title">æœç´¢å†å²</text>
      <view class="history-actions">
        <text class="action-icon" bindtap="clearAllHistory">æ¸…ç©º</text>
      </view>
    </view>
    <view class="history-list">
      <block wx:for="{{searchHistory}}" wx:key="index">
        <view class="history-item" bindtap="useHistorySearch" data-keyword="{{item.keyword}}">
          <text class="history-text">{{item.keyword}}</text>
          <text class="history-time" wx:if="{{item.time}}">{{item.time}}</text>
          <text class="history-delete" bindtap="removeHistory" data-index="{{index}}" catchtap="true">Ã—</text>
        </view>
      </block>
    </view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{searchKeyword}}">
    <view class="section-title">æœç´¢ç»“æœ</view>
    <view class="video-grid" wx:if="{{videos.length}}">
      <block wx:for="{{videos}}" wx:key="vid">
        <view class="video-item" bindtap="goDetail" data-vid="{{item.video.vid}}">
          <image class="video-cover" src="{{item.video.cover_url}}" mode="aspectFill" />
          <view class="video-title text-ellipsis">{{item.video.title}}</view>
          <view class="video-meta">
            <text class="play-count">{{formatNum(item.stats.play || item.video.play_count || item.video.playCount || 0)}} æ’­æ”¾</text>
            <text class="danmu-count">{{formatNum(item.stats.danmu || item.video.danmu_count || item.video.danmuCount || 0)}} å¼¹å¹•</text>
          </view>
        </view>
      </block>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-more">åŠ è½½ä¸­...</view>
    <view wx:if="{{!hasMore && videos.length > 0}}" class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
    <view wx:if="{{!loading && videos.length === 0}}" class="no-results">
      <text class="no-results-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è§†é¢‘</text>
    </view>
  </view>

  <!-- åé¦ˆæŒ‰é’® -->
  <view class="feedback-btn" bindtap="showFeedback">
    <text class="feedback-icon">?</text>
    <text class="feedback-text">åé¦ˆ</text>
  </view>
</view>

