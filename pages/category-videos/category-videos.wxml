<view class="container">
  <!-- åˆ†åŒºæ ‡é¢˜ -->
  <view class="category-header">
    <text class="category-name">{{categoryName}}</text>
  </view>

  <!-- æŽ’åºé€‰é¡¹ -->
  <view class="sort-bar">
    <view 
      class="sort-item {{sortRule === 1 ? 'active' : ''}}" 
      bindtap="changeSortRule" 
      data-rule="1"
    >
      æœ€æ–°æŠ•ç¨¿
    </view>
    <view 
      class="sort-item {{sortRule === 2 ? 'active' : ''}}" 
      bindtap="changeSortRule" 
      data-rule="2"
    >
      æœ€å¤šæ’­æ”¾
    </view>
    <view 
      class="sort-item {{sortRule === 3 ? 'active' : ''}}" 
      bindtap="changeSortRule" 
      data-rule="3"
    >
      æœ€å¤šç‚¹èµž
    </view>
  </view>

  <!-- è§†é¢‘åˆ—è¡¨ -->
  <scroll-view 
    class="video-list" 
    scroll-y="true" 
    bindscrolltolower="loadMore"
    lower-threshold="100"
  >
    <view class="video-grid">
      <view 
        class="video-item card" 
        wx:for="{{videoList}}" 
        wx:key="vid"
        bindtap="goDetail"
        data-vid="{{item.video.vid}}"
      >
        <view class="thumb-wrap">
          <image class="cover" src="{{item.video.coverUrl}}" mode="aspectFill" />
          <view class="cover-mask">
            <view class="stats-left">
              <view class="stat-item">
                <text class="stat-icon">â–¶</text>
                <text class="stat-text">{{formatNum(item.stats.play)}}</text>
              </view>
              <view class="stat-item">
                <text class="stat-icon">ðŸ’¬</text>
                <text class="stat-text">{{formatNum(item.stats.danmu)}}</text>
              </view>
            </view>
            <view class="duration">{{formatDuration(item.video.duration)}}</view>
          </view>
        </view>
        <view class="title text-ellipsis">{{item.video.title}}</view>
        <view class="meta">
          <text class="up-name">{{item.user.nickname || 'UPä¸»'}}</text>
          <text class="upload-time">Â· {{formatUploadTime(item.video.uploadDate)}}</text>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="load-status">
      <view wx:if="{{loading}}" class="loading">
        <text class="loading-text">åŠ è½½ä¸­...</text>
      </view>
      <view wx:elif="{{!hasMore && videoList.length > 0}}" class="no-more">
        <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
      </view>
      <view wx:elif="{{videoList.length === 0 && !loading}}" class="empty">
        <text class="empty-icon">ðŸ“­</text>
        <text class="empty-text">æš‚æ— è§†é¢‘</text>
      </view>
    </view>
  </scroll-view>
</view>

