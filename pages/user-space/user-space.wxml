<view class="container">
  <!-- å›ºå®šèŠå¤©æŒ‰é’® -->
  <view class="chat-btn" bindtap="goChat">ğŸ’¬</view>

  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="profile-section">
    <!-- ç”¨æˆ·å¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯ -->
    <view class="user-header">
      <view class="avatar-container">
        <image wx:if="{{user.avatar_url}}" class="avatar" src="{{user.avatar_url}}" mode="aspectFill" />
        <view wx:else class="avatar placeholder">ğŸ™‚</view>
        <view wx:if="{{user.level}}" class="level-badge">LV{{user.level}}</view>
      </view>
      
      <view class="user-info">
        <view class="name-row">
          <text class="nickname">{{user.nickname || 'ç”¨æˆ·'}}</text>
          <view wx:if="{{user.auth}}" class="auth-badge">è®¤è¯</view>
          <view wx:if="{{user.vip}}" class="vip-badge">å¤§ä¼šå‘˜</view>
        </view>
        <view class="desc">{{user.signature || 'è¿™ä¸ªäººå¾ˆç¥ç§˜ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰å†™'}}</view>
        <view class="location">IPå±åœ°: {{user.location || 'æœªçŸ¥'}}</view>
      </view>
    </view>

    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-row">
      <view class="stat-item" bindtap="goFans">
        <text class="stat-number">{{formatNum(user.fansCount || 0)}}</text>
        <text class="stat-label">ç²‰ä¸</text>
      </view>
      <view class="stat-item" bindtap="goFollows">
        <text class="stat-number">{{formatNum(user.followsCount || 0)}}</text>
        <text class="stat-label">å…³æ³¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{formatNum(user.loveCount || 0)}}</text>
        <text class="stat-label">è·èµ</text>
      </view>
    </view>

    <!-- å…³æ³¨æŒ‰é’® -->
    <view class="follow-btn">
      <text class="follow-text">+ å…³æ³¨</text>
    </view>
  </view>

  <!-- å¯¼èˆªæ ‡ç­¾ -->
  <view class="nav-tabs">
    <view class="tab {{activeTab === 'home' ? 'active' : ''}}" bindtap="switchTab" data-tab="home">ä¸»é¡µ</view>
    <view class="tab {{activeTab === 'videos' ? 'active' : ''}}" bindtap="switchTab" data-tab="videos">æŠ•ç¨¿</view>
    <view class="tab {{activeTab === 'favorites' ? 'active' : ''}}" bindtap="switchTab" data-tab="favorites">æ”¶è—</view>
  </view>

  <!-- è§†é¢‘åˆ—è¡¨åŒºåŸŸ -->
  <view wx:if="{{activeTab === 'videos'}}" class="videos-section">
    <view class="section-header">
      <view class="play-all-btn">
        <text class="play-icon">â–¶</text>
        <text class="play-text">æ’­æ”¾å…¨éƒ¨</text>
      </view>
      <view class="sort-option">
        <text class="sort-text">æœ€æ–°å‘å¸ƒ</text>
        <text class="sort-icon">â˜°</text>
      </view>
    </view>

    <view wx:if="{{videos.length > 0}}" class="video-list">
      <block wx:for="{{videos}}" wx:key="vid">
        <view class="video-item" bindtap="goDetail" data-vid="{{item.video.vid}}">
          <view class="video-thumbnail">
            <image class="thumbnail" src="{{item.video.cover_url || item.video.coverUrl}}" mode="aspectFill" />
            <view class="duration">{{formatDuration(item.video.duration)}}</view>
          </view>
          <view class="video-info">
            <view class="video-title">{{item.video.title}}</view>
            <view class="video-meta">
              <text class="upload-time">{{formatUploadTime(item.video.uploadDate)}}</text>
            </view>
            <view class="video-stats">
              <view class="stat">
                <text class="stat-icon">â–¶</text>
                <text class="stat-text">{{formatNum(item.stats.play || item.video.play_count || item.video.playCount || 0)}}</text>
              </view>
              <view class="stat">
                <text class="stat-icon">ğŸ’¬</text>
                <text class="stat-text">{{formatNum(item.stats.danmu || item.video.danmu_count || item.video.danmuCount || 0)}}</text>
              </view>
            </view>
          </view>
          <view class="more-btn">â‹®</view>
        </view>
      </block>
    </view>
    <view wx:else class="empty-state">
      <text class="empty-text">æš‚æ— è§†é¢‘</text>
    </view>
  </view>

  <!-- å…¶ä»–æ ‡ç­¾å†…å®¹ -->
  <view wx:elif="{{activeTab === 'home'}}" class="home-content">
    <text class="empty-text">ä¸»é¡µå†…å®¹å¼€å‘ä¸­</text>
  </view>
  <view wx:else class="favorites-content">
    <text class="empty-text">æ”¶è—å†…å®¹å¼€å‘ä¸­</text>
  </view>
</view>